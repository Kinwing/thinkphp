{// 引入标签库 }
<tagLib name="html" />
{// 加载头部公共文件 }
<include file="../Public/header" />
<!-- 菜单区域  -->
<div id="menu" class="menu"><include file="../Public/menu" /></div>
<!-- 主页面开始 -->
<div id="main" class="main" >
<SCRIPT LANGUAGE="JavaScript">
<!--
function getLabel(request){
	$('command').value = request.responseText;
}
function addLabel(){
	SmartAjax.send('__URL__/getLabel','ajax=1&id='+$F('labelPhp'),'',getLabel);
}

SmartAjax.updateEffect = {'opacity':[1,0.3]};
function runphp(){
	var command	 =	 $F('command');
	SmartAjax.send('__URL__/runphp','ajax=1&command='+encodeURIComponent(command)+'&label='+$F('label'),'result');
}
function clearTemplate(){
	if ($F('appName') != '')
	{
		SmartAjax.send('__URL__/clearTmplCache','ajax=1&app='+$F('appName'),'result');
	}else {
		alert('选择项目');
	}
}
function delLabel(){
	if ($F('labelPhp') != '')
	{
		SmartAjax.send('__URL__/delLabel','ajax=1&id='+$F('labelPhp'),'result');
	}else {
		alert('选择标签');
	}
}
	function labelSearch(){
		var obj	=	$('labelPhp');
		var length = obj.options.length;
		for (i =0 ;i<length; i++){
			if (obj.options[i].text.indexOf($('searchLabel').value)!=-1)
			{
				obj.item(i).selected = true;
				break;
			}
		}
	}
function buildTemplate(){
	if ($F('appName') != ''){
		$('result').innerHTML	=	'模版编译中～请等待！';
		alert("模版编译时间比较长，请耐心等候～");
		SmartAjax.send('__URL__/buildTemplate','ajax=1&app='+$F('appName'),'result');
	}else {
		alert('选择项目');
	}
}
function showSysInfo(){
	$('sysInfo').style.display = 'block';
}
function hiddenSysInfo(){
	$('sysInfo').style.display='none'
}
//-->
</SCRIPT>
<!-- 主体内容  -->
<div class="content" >
<div class="title">系统功能列表 <A HREF="javascript:void(0)" onclick="showSysInfo()">系统信息查看</A></div>
<!--  功能操作区域  -->
<div class="cBoth" >
<div id="result" class="effect"></div>
<fieldset id="">
<legend style="color:gray">模版操作</legend>
<div class="fLeft hMargin">
<SELECT id="appName" class="hMargin medium">
<volist name="app" id="app" >
<option value="{$app.name}">{$app.title}</option>
</volist>
</SELECT></div>
<!-- <html:imageBtn name="ok" value="编译"  click="buildTemplate()" style="impBtn hMargin fLeft shadow" /> -->
<input type="button"   value="清 除"  onclick="clearTemplate()" class="button small hMargin fLeft " />
</fieldset>
<!-- SQL执行器 -->
<fieldset id="querybox" >
<legend style="color:gray">执行PHP命令（<span style="color:orange">请慎用</span>）</legend>
<div id="dbSql" class="vMargin"><TEXTAREA id="execSql" NAME="command" check="Require" warning="输入要执行的PHP语句！" style="width:480px;height:158px;overflow:auto;background:#EEEEFF" >&lt;?php</TEXTAREA><SELECT id="labelPhp" class="hMargin medium" NAME="labelName" size="10" ondblclick="addLabel()">
<volist name="labels" id="label" >
<option value="{$label.id}" >{$label.label}</option>
</volist>
</SELECT>
</div>
<input type="button"  value="执 行"  onclick="runphp()" class="button small hMargin fLeft " />
<input type="reset" value="重 置"  class="button small hMargin fLeft " />
<div class="fLeft hMargin">保存为标签：<INPUT TYPE="text" style="width:175px" NAME="label"></div>
<input type="button"   value="删 除"  click="delLabel()" class="button hMargin small  fLeft " />
<div class="fLeft"><INPUT TYPE="text" id="searchLabel" style="width:100px" NAME="label"></div>
<input type="button" value="搜索" click="labelSearch()" class="button hMargin fLeft " />
</fieldset>

<div id="sysInfo" style="display:none">
<!-- 服务器信息 -->
<fieldset id="querybox" >
<legend style="color:gray">服务器信息 [ <A HREF="javascript:void(0)" onclick="hiddenSysInfo()">隐 藏</A> ]</legend>
<div style="float:left;width:65%">
服务器时间：<?php echo date("Y年n月j日 H:i:s");?> 北京时间：<?php echo gmdate("Y年n月j日 H:i:s",time()+8*3600);?><BR>
服务器域名/IP地址:<?php echo $_SERVER['SERVER_NAME'] ?>	(<?php echo @gethostbyname($_SERVER['SERVER_NAME']);?>)<BR>
<?php if (!IS_WIN):?>
服务器处理器 CPU:<BR>
服务器运行时间:<BR>
<?php endif;?>
服务器操作系统:<?php $os = explode(" ", php_uname());?><?php echo $os[0];?>	(内核版本：<?php echo $os[2]?>)<BR>
主机名称:<?php echo $os[1];?><BR>
服务器解译引擎:<?php echo $_SERVER['SERVER_SOFTWARE']?><BR>
Web服务端口:<?php echo $_SERVER['SERVER_PORT']?><BR>
服务器管理员:<a href="mailto:<?php echo $_SERVER['SERVER_ADMIN']?>"><?php echo $_SERVER['SERVER_ADMIN']?></a><BR>
剩余空间&nbsp;diskfreespace:<?php echo round((@disk_free_space(".")/(1024*1024)),2)?>M<BR>
<?php if (!IS_WIN):?>
内存使用状况: 物理内存：共<?php echo $sysInfo['memTotal']?>M, 已使用<?php echo $sysInfo['memUsed']?>M, 空闲<?php echo $sysInfo['memFree']?>M, 使用率					<?php echo $sysInfo['memPercent']?>	%	<?php echo bar($sysInfo['memPercent'])?>SWAP区：共<?php echo $sysInfo['swapTotal']?>M, 已使用				<?php echo $sysInfo['swapUsed']?>M, 空闲<?php echo $sysInfo['swapFree']?>M, 使用率<?php echo $sysInfo['swapPercent']?>	%	<?php echo bar($sysInfo['swapPercent'])?><BR>
系统平均负载:<?php echo $sysInfo['loadAvg']?><BR>
<?php endif;?>
PHP运行方式:<?php echo php_sapi_name()?><BR>
PHP版本:<?php echo PHP_VERSION?><BR>
运行于安全模式:<?php echo getcon("safe_mode")?><BR>
支持ZEND编译运行:<?php echo (get_cfg_var("zend_optimizer.optimization_level")||get_cfg_var("zend_extension_manager.optimizer_ts")||get_cfg_var("zend_extension_ts")) ?YES:NO?><BR>
允许使用URL打开文件&nbsp;allow_url_fopen:<?php echo getcon("allow_url_fopen")?><BR>
允许动态加载链接库&nbsp;enable_dl:<?php echo getcon("enable_dl")?><BR>
显示错误信息&nbsp;display_errors:<?php echo getcon("display_errors")?><BR>
自动定义全局变量&nbsp;register_globals:<?php echo getcon("register_globals")?><BR>
程序最多允许使用内存量&nbsp;memory_limit:<?php echo getcon("memory_limit")?><BR>
POST最大字节数&nbsp;post_max_size:<?php echo getcon("post_max_size")?><BR>
允许最大上传文件&nbsp;upload_max_filesize:<?php echo getcon("upload_max_filesize")?><BR>
程序最长运行时间&nbsp;max_execution_time:<?php echo getcon("max_execution_time")?>秒<BR>
magic_quotes_gpc:<?php echo (1===get_magic_quotes_gpc())?YES:NO?><BR>
magic_quotes_runtime:<?php echo (1===get_magic_quotes_runtime())?YES:NO?><BR>
被禁用的函数&nbsp;disable_functions:<?php echo (""==($disFuns=get_cfg_var("disable_functions")))?"无":str_replace(",","<br />",$disFuns)?><BR>
PHP信息&nbsp;PHPINFO:<?php echo (false!==eregi("phpinfo",$disFuns))?NO:"<a href='__URL__/phpinfo/' target='_blank' class='static'>PHPINFO</a>"?><BR>
<?php $isMail = (false !== function_exists("mail"))?"":" disabled";?>
MAIL邮件发送测试<BR>
收信地址:<input type="text" name="mailReceiver" <?php echo $isMail;?> class="medium" />
					&nbsp;<input type="submit" class="button" value="SENDMAIL" <?php echo $isMail;?> name="act" /><BR>
函数支持状况<BR>
函数名称:<input type="text" name="funName" class="medium" />
					&nbsp;<input type="submit" value="FUNCTION_CHECK" class="button" /><BR>
</div><div style="float:left;width:35%">
拼写检查 ASpell Library:<?=isfun("aspell_check_raw")?><BR>
高精度数学运算 BCMath:<?=isfun("bcadd")?><BR>
历法运算 Calendar:<?=isfun("cal_days_in_month")?><BR>
DBA数据库:<?=isfun("dba_close")?><BR>
dBase数据库:<?=isfun("dbase_close")?><BR>
DBM数据库:<?=isfun("dbmclose")?><BR>
FDF表单资料格式:<?=isfun("fdf_get_ap")?><BR>
FilePro数据库:<?=isfun("filepro_fieldcount")?><BR>
Hyperwave数据库:<?=isfun("hw_close")?><BR>
图形处理 GD Library:<?=isfun("gd_info")?><BR>
IMAP电子邮件系统:<?=isfun("imap_close")?><BR>
Informix数据库:<?=isfun("ifx_close")?><BR>
LDAP目录协议:<?=isfun("ldap_close")?><BR>
MCrypt加密处理:<?=isfun("mcrypt_cbc")?><BR>
哈稀计算 MHash:<?=isfun("mhash_count")?><BR>
mSQL数据库:<?=isfun("msql_close")?><BR>
SQL Server数据库:<?=isfun("mssql_close")?><BR>
MySQL数据库:<?=isfun("mysql_close")?><BR>
SyBase数据库:<?=isfun("sybase_close")?><BR>
Yellow Page系统:<?=isfun("yp_match")?><BR>
Oracle数据库:<?=isfun("ora_close")?><BR>
Oracle 8 数据库:<?=isfun("OCILogOff")?><BR>
PREL相容语法 PCRE:<?=isfun("preg_match")?><BR>
PDF文档支持:<?=isfun("pdf_close")?><BR>
Postgre SQL数据库:<?=isfun("pg_close")?><BR>
SNMP网络管理协议:<?=isfun("snmpget")?><BR>
VMailMgr邮件处理:<?=isfun("vm_adduser")?><BR>
WDDX支持:<?=isfun("wddx_add_vars")?><BR>
压缩文件支持(Zlib):<?=isfun("gzclose")?><BR>
XML解析:<?=isfun("xml_set_object")?><BR>
FTP:<?=isfun("ftp_login")?><BR>
ODBC数据库连接:<?=isfun("odbc_close")?><BR>
Session支持:<?=isfun("session_start")?><BR>
Socket支持:<?=isfun("socket_accept")?><BR>
</div>
</fieldset>
</div>
<!-- 网站资源 -->
<fieldset id="querybox" >
<legend style="color:gray">FCS 资源站点</legend>
<B>官方BLOG：</B><A HREF="http://fcs.org.cn/blog" target="_blank">http://fcs.org.cn/blog</A><BR>
<B>SVN地址：</B><A HREF="http://fcs.org.cn/svn/trunk/" target="_blank">http://fcs.org.cn/svn/trunk/</A><BR>
<B>TopThink：</B><A HREF="http://www.topthink.com.cn" target="_blank">http://www.topthink.com.cn</A>
</fieldset>
</div>
<!-- 列表显示区域结束 -->
</div>
<!-- 主体内容结束 -->
</div>
<!-- 主页面结束 -->
{// 加载尾部公共文件 }
<include file="../Public/footer" />