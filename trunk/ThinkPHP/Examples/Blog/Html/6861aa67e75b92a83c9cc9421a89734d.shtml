<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><HEAD><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta name="generator" content="ThinkPHP 1.0.2" /><meta name="keywords" content="" /><meta name="robots" content="all" /><meta name="author" content="liu21st | www.topthink.com.cn" /><meta name="Copyright" content="Copyright (c) 2007 thinkPHP.cn" /><TITLE> ThinkPHP PHP最佳实践框架</TITLE><link rel="shortcut icon" href="/favicon.ico" ><link rel="icon" href="/animated_favicon1.gif" type="image/gif" ><link rel='stylesheet' type='text/css' href='/thinkphp/Examples/Blog/Tpl/default/Public/css/style.css'><script language='JavaScript' src='/thinkphp/Examples/Blog/Tpl/default/Public/js/Common.js'></script> <script language='JavaScript' src='/thinkphp/Examples/Public/Js/Base.js'></script> <script language='JavaScript' src='/thinkphp/Examples/Public/Js/prototype.js'></script>  <script language='JavaScript' src='/thinkphp/Examples/Public/Js/mootools.js'></script>  <script language='JavaScript' src='/thinkphp/Examples/Public/Js/Ajax/ThinkAjax.js'></script>  <script language='JavaScript' src='/thinkphp/Examples/Public/Js/UbbEditor.js'></script> <script language='JavaScript' src='/thinkphp/Examples/Public/Js/Form/CheckForm.js'></script>  <SCRIPT LANGUAGE="JavaScript">var URL = '/thinkphp/Examples/blog/index.php/Blog';var APP	 =	 '/thinkphp/Examples/blog/index.php';var PUBLIC = '/thinkphp/Examples/Public';ThinkAjax.updateTip = '<IMG SRC="/thinkphp/Examples/Blog/Tpl/default/Public/images/loading2.gif" WIDTH="16" HEIGHT="16" BORDER="0" ALT="loading..." align="absmiddle"> 数据处理中...';</SCRIPT></HEAD>
<body >
<div id="header">
<div id="innerHeader">
  <div id="blogLogo"></div>
  <div class="blog-header">
    <div class="blog-title"><IMG SRC="/thinkphp/Examples/Blog/Tpl/default/Public/images/logo.png"  style="border:1px solid gray" BORDER="0" ALT="" align="absmiddle"> <a href="http://thinkphp.cn">ThinkPHP</a></div>
    <div class="blog-desc">PHP最佳实践框架  [ Blog示例程序]</div>
  </div>
  <div id="menu">
    <ul>
    <li><a href="/thinkphp/Examples/blog/index.php">日志首页</a></li>
    <li><a href="/thinkphp/Examples/Blog/index.php/Blog/add">撰写日志</a></li>
    <li><a href="http://thinkphp.cn">官方网站</a></li>
    </ul>
  </div>
</div>
</div>


<div id="mainWrapper">
<div id="content" class="content">
<div id="innerContent">
<SCRIPT LANGUAGE="JavaScript">
<!--
	function addRow(){   
	curFileNum++;
	rowsnum++;
    var row=tbl.insertRow(-1);
	//var td = arow.insertCell();
	var cell = document.createElement("td");
	cell.innerHTML='<div class="impBtn  fLeft" ><INPUT TYPE="file" id="file'+curFileNum+'" name="file'+ curFileNum +'" class="file  huge"></div><div class="fLeft hMargin"><IMG SRC="/thinkphp/Examples/Blog/Tpl/default/Public/images/del.gif"  style="cursor:hand" onfocus="javascript:getObject(this)" onclick="deleteRow();" WIDTH="20" HEIGHT="20" BORDER="0" ALT="删除" align="absmiddle"></div> ';
	cell.align="center"
	row.appendChild(cell); 
	//addFileForm.num.value=rowsnum;
}
function deleteRow(){
	if(tbl.rows.length>0){
		tbl.deleteRow(rindex); //删除当前行
		rowsnum--;    
	}else{
		return;
	}
	rindex="";
}
function getObject(obj){ 
	rindex=obj.parentElement.parentElement.rowIndex;/*当前行对象*/
}

function uploading(msg){
	$('result').style.display = 'block';
	$('result').innerHTML	=	'<IMG SRC="/thinkphp/Examples/Blog/Tpl/default/Public/images/ajaxloading.gif" WIDTH="16" HEIGHT="16" BORDER="0" ALT="" align="absmiddle"> 文件上传中～';
	return true;
}
function save(){
	if ($('file1').value)
	{
		uploading();
		$('upload').submit();
	}else{
	saveEditor();
	ThinkAjax.sendForm('form1','/thinkphp/Examples/blog/index.php/Blog/insert/',doComplete,'result');
	}
}
function selectCategory(){
 var result= PopModalWindow('/thinkphp/Examples/blog/index.php/Category/treeSelect/',268,360);
 if(typeof(result) == "undefined") return;
	$('categoryName').value=result[0][0];
	$('categoryId').value=result[0][1];
}
function uploadComplete(){
	saveEditor();
	ThinkAjax.sendForm('form1','/thinkphp/Examples/blog/index.php/Blog/insert/',doComplete,'result');
	$('upload').reset();
}
		function doComplete(data,status){
			if (status==1)
			{
			window.location.href='/thinkphp/Examples/blog/index.php/Blog';
			$('form1').reset();
			$('upload').reset();
			fleshVerify();
			}
		}
//-->
</SCRIPT>
<div class="commentbox">
<TABLE cellpadding=3 cellspacing=3 width="680px" > 
<TR>  
	<TD colspan="2"><div class="block-title"><H5><IMG SRC="/thinkphp/Examples/Blog/Tpl/default/Public/images/modify.gif" WIDTH="20" HEIGHT="23" BORDER="0" ALT="" align="absmiddle"> 发表新的日志</H5></div>
</TD>
</TR>
<TR>
	<TD colspan="2">
	<FORM METHOD=POST id="form1" >
	<TABLE cellpadding=3 cellspacing=3 style="font-size:14px">
	<TR>
	<TD colspan="2"><div id="result" class="result none"></div></TD>
	</TR>
	<TR>
	<TD class="tRight tTop" width="20%">标题：</TD>
	<TD class="tLeft"><INPUT TYPE="text" class="huge text" check='Require' warning="标题不能为空" NAME="title"></TD>
	</TR>
	<TR>
	<TD class="tRight tTop" >类别：</TD>
	<TD class="tLeft">
	<SELECT NAME="categoryId" class="medium text">
	<OPTION VALUE="1">test	</SELECT>
	</TD>
	</TR>
	<TR>
	<TD class="tRight tTop" >日志：</TD>
	<TD class="tLeft"><!-- 编辑器调用开始 --><script type="text/javascript" src="/thinkphp/Examples/Public/Js/FCKeditor/fckeditor.js"></script><textarea id="editor" name="content"></textarea><script type="text/javascript"> var oFCKeditor = new FCKeditor( "editor","550px","245px" ) ; oFCKeditor.BasePath = "/thinkphp/Examples/Public/Js/FCKeditor/" ; oFCKeditor.ReplaceTextarea() ;function resetEditor(){setContents("editor",document.getElementById("editor").value)}; function saveEditor(){document.getElementById("editor").value = getContents("editor");} </script> <!-- 编辑器调用结束 --></TD>
	</TR>
	<TR>
	<TD class="tRight tTop" >标签：</TD>
	<TD class="tLeft"><INPUT TYPE="text" class="huge text"  NAME="tags"> <span style="color:gray">用空格隔开多个标签</span></TD>
	</TR>
	<TR>
		<TD ></TD>
		<TD class="center">
		<div style="width:85%;color:gray">
		<INPUT TYPE="hidden" name="ajax" value="1">
		<div class="fLeft hMargin"><img id="verifyImg" src="/thinkphp/Examples/blog/index.php/Blog/verify" align="absmiddle"> <INPUT TYPE="text" NAME="verify" class="text small"> 输入验证码 [ <A HREF="javascript:fleshVerify()">看不清？</A> ] </div>
		<div class="fLeft hMargin"><INPUT TYPE="reset" class="submit small"  value="重 置" ></div>
		<div class="fLeft hMargin"><INPUT TYPE="button" id="submit" value="发表日志" onclick="save()" class="submit small"></div>
		</div></TD>
	</TR>
		</form>
<form id="upload" METHOD=POST action="/thinkphp/Examples/blog/index.php/Blog/upload/" onsubmit="return CheckForm(this);" enctype="multipart/form-data" target="iframeUpload">
<TR>
	<TD class="tRight tTop">附件：</TD>
	<TD class="tLeft tTop"><INPUT TYPE="hidden" name="ajax" value="1">
	<iframe name="iframeUpload" src="" width="350" height="35" frameborder=0  SCROLLING="no" style="display:none"></iframe>
	<INPUT TYPE="hidden" name="_uploadFileResult" value="result">
	<INPUT TYPE="hidden" name="_uploadFormId" value="upload">
	<INPUT TYPE="hidden" name="_uploadFileSize" value="-1">
	<INPUT TYPE="hidden" name="_uploadResponse" value="uploadComplete">
	<INPUT TYPE="hidden" name="_uploadFileVerify" value="">
	<INPUT TYPE="hidden" name="_uploadFileType" value="jpeg,jpg,gif,png,doc,rar,zip,mp3,wav,flv,rm,asf">
	<INPUT TYPE="hidden" name="_uploadSavePath" value="./Public/Uploads/" >
	<INPUT TYPE="button" value="增 加" onclick="addRow();" class="submit small">
	<TABLE id='tbl' style="clear:both"></TABLE>
</TD>
</TR>
</form>
	</TABLE>
	</TD>
</TR> 
</TABLE>
</div>
</div>
<SCRIPT LANGUAGE="JavaScript">
<!--
var curFileNum = 0;
var rowsnum=0;  //记录行数
var rindex="";       //列索引
var tbl	=	$('tbl');
addRow();
//-->
</SCRIPT>
<!-- 版权信息区域 -->
<div id="footer" class="footer" >
<div id="innerFooter">
Powered by ThinkPHP 1.0.2 | Template designed by <a target="_blank" href="http://www.topthink.com.cn">TopThink</a></div>
</div>
</BODY>
</HTML>