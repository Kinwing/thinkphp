{// 引入标签库 }
<tagLib name="html" />
{// 加载头部公共文件 }
<include file="../Public/header" />
<!-- 菜单区域  -->
<div id="menu" class="menu"><include file="../Public/menu" /></div>
<!-- 主页面开始 -->
<div id="main" class="main" >
<html:import type="js" file="Js.Ajax.SmartAjax" /> 
<SCRIPT LANGUAGE="JavaScript">
<!--
function getLabel(data){
	$('command').value = data;
}
function addLabel(){
	ThinkAjax.send('__URL__/getLabel','ajax=1&id='+$F('labelPhp'),getLabel);
}

function runphp(){
	var command	 =	 encodeURIComponent($F('command'));
	SmartAjax.send('__URL__/runphp','ajax=1&command='+command+'&label='+encodeURIComponent($F('label')),'result');
}
function clearTemplate(){
	if ($F('appName') != '')
	{
		ThinkAjax.send('__URL__/clearTmplCache','ajax=1&app='+$F('appName'));
	}else {
		alert('选择项目');
	}
}
function delLabel(){
	if ($F('labelPhp') != '')
	{
		ThinkAjax.send('__URL__/delLabel','ajax=1&id='+$F('labelPhp'));
	}else {
		alert('选择标签');
	}
}
	function labelSearch(){
		var obj	=	$('labelPhp');
		var length = obj.options.length;
		for (i =0 ;i<length; i++){
			if (obj.options[i].text.indexOf($('searchLabel').value)!=-1)
			{
				obj.item(i).selected = true;
				break;
			}
		}
	}
//-->
</SCRIPT>
<!-- 主体内容  -->
<div class="content" >
<div class="title">系统功能列表</div>
<!--  功能操作区域  -->
<div class="cBoth" >
<div id="result" class="effect"></div>
<fieldset id="">
<legend style="color:gray">模版操作</legend>
<div class="fLeft hMargin">
<SELECT id="appName" class="hMargin medium">
<volist name="app" id="app" >
<option value="{$app.name}">{$app.title}</option>
</volist>
</SELECT></div>
<!-- <html:imageBtn name="ok" value="编译"  click="buildTemplate()" style="impBtn hMargin fLeft shadow" /> -->
<html:imageBtn name="delete" value="清除"  click="clearTemplate()" style="impBtn hMargin fLeft shadow" />
</fieldset>
<!-- SQL执行器 -->
<fieldset id="querybox" >
<legend style="color:gray">执行PHP命令（<span style="color:orange">请慎用</span>）</legend>
<div id="dbSql" class="vMargin"><TEXTAREA id="execSql" NAME="command" check="Require" warning="输入要执行的PHP语句！" style="width:480px;height:158px;overflow:auto;background:#EEEEFF" >&lt;?php</TEXTAREA><SELECT id="labelPhp" class="hMargin medium" NAME="labelName" size="10" ondblclick="addLabel()">
<volist name="labels" id="label" >
<option value="{$label.id}" >{$label.label}</option>
</volist>
</SELECT>
</div>
<html:imageBtn name="ok" value="执行"  click="runphp()" style="impBtn hMargin fLeft shadow" />
<html:imageBtn name="sort" type="reset" value="重置"  style="impBtn hMargin fLeft shadow" />
<div class="fLeft">保存为标签：<INPUT TYPE="text" class="medium" NAME="label"></div>
<html:imageBtn name="delete" value="删除"  click="delLabel()" style="impBtn hMargin fLeft shadow" />
<div class="fLeft"><INPUT TYPE="text" id="searchLabel" style="width:120px" NAME="label"></div>
<html:imgLink name="search" alt="搜索"  click="labelSearch()" style=" hMargin fLeft shadow" />
</fieldset>


<!-- 表操作器 -->
<FORM METHOD=POST ACTION="">
<fieldset id="querybox" >
<legend style="color:gray">ThinkPHP 资源站点</legend>
<div id="dbSql" class="vMargin">
<B>官方网站：</B><A HREF="http://thinkphp.cn" target="_blank">http://thinkphp.cn</A><BR>
<B>TopThink：</B><A HREF="http://www.topthink.com.cn" target="_blank">http://www.topthink.com.cn</A>

</fieldset>
</FORM>
</div>
<!-- 列表显示区域结束 -->
</div>
<!-- 主体内容结束 -->
</div>
<!-- 主页面结束 -->
{// 加载尾部公共文件 }
<include file="../Public/footer" />